
#content-left

  %h1 
    Edit Material


  // Stone lists: Antiques, Newly Crafted (Excluding ones with Antique in title), All
  / %ul
  /   / ANTIQUES
  /   %li
  /     %a.expanded
  /       .arrow
  /       %span.arrowTxt Antiques
  / 
  /     %ul
  /       - @materials_antique_in_title.each do |mat|
  /         %li
  /           = link_to "#{mat.title} #{mat.material_type_title}", material_path(mat)
  / 
  /   / NEWLY CRAFTED
  /   %li
  /     %a.collapsed
  /       .arrow 
  /       %span.arrowTxt Newly Crafted
  / 
  /     %ul
  /       - @materials_newly_crafted_sidebar.each do |mat|
  /         %li
  /           = link_to "#{mat.title} #{mat.material_type_title}", material_path(mat)
  / 
  /   / ALL
  /   %li
  /     %a.collapsed
  /       .arrow 
  /       %span.arrowTxt All Materials
  / 
  /       %ul
  /         - @materials_alpha.each do |mat|
  /           %li
  /             = link_to "#{mat.title} #{mat.material_type_title}", material_path(mat)



  %ul
    - @materials.each do |material| 
      %li
        = link_to material.title, edit_admin_material_path(material)

  %a{href: "/"} Create new material

#content-center

  = form_for @material, :url => admin_material_path do |f| 

    / %h4 Title
    = f.text_field :title
    
    %h4 Material Type
    
    = f.select(:material_type_id, @all_material_types.collect {|mat_type| [ mat_type.title, mat_type.id ]}, { :include_blank => 'Material Type'})
        
    %h4 Select finishe(s)

    %select#finishIds{name: 'material[finish_ids][]', size: "5x20", multiple: true}
      - @all_finishes.each do |finish|
        %option{:value => finish.id, :selected =>  @material.finishes.include?(finish) ? "selected" : nil}
          =finish.title 

    %h4 Select application(s)
    
    %select#applicationIds{name: 'material[application_ids][]', size: "5x20", multiple: true}
      - @all_applications.each do |app|
        %option{:value => app.id, :selected =>  @material.applications.include?(app) ? "selected" : nil}
          = app.title

    %h4 Description
    = f.text_area :description, :size => "50x5", :placeholder => "Description of material..."

    %h4 Material Specifications
    = f.text_area :specifications, :size => "50x5", :placeholder => "Specifications..."
    
    %h4 Technical Data
    = f.text_area :technical_data, :size => "50x5", :placeholder => "Technical Data..."

    / %h4 Add a pdf file
    / = f.file_field 'material[pdf]'    
    / - unless @material.pdf_id.nil?
    /   %p
    /     current pdf: 
    /     - @pdf = Pdf.find(@material.pdf_id)
    /     = @pdf.orig_filename


    / = render :partial => "sidebar"

    = f.submit :id => "update_material", :class => "submit"
    
  = button_to 'Delete Material', admin_material_path(@material), :method => :delete, :confirm => "Are you sure you want to delete this material and all of it's gallery images?", :class => "delete"    

  = button_to 'View Material Page', material_path(@material), :method => :get, :class => 'view'
  
  // %input.view{value: "View Material Page"}

  .clear


#content-right
  
  = render :partial => 'new_image_form', :locals => { :material => @material }
    
  - if @material.images.count > 0
    = render :partial => 'gallery', :locals => { :material => @material }  
  - else
    .placeholder-large


